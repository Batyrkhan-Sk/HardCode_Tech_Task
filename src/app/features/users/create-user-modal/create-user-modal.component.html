<div class="modal-backdrop" (click)="onBackdropClick($event)">
  <div class="modal-container">
    <div class="modal-header">
      <h2 class="modal-title">Add New User</h2>
      <button
        class="close-button"
        (click)="onClose()"
        aria-label="Close modal"
      >
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
        </svg>
      </button>
    </div>

    <form [formGroup]="createForm" (ngSubmit)="onSubmit()" class="modal-form">
      <div class="form-group">
        <label for="name" class="form-label">
          Full Name <span class="required">*</span>
        </label>
        <input
          type="text"
          id="name"
          formControlName="name"
          class="form-input"
          [class.error]="hasError('name')"
          placeholder="John Doe"
          autocomplete="name"
        />
        <span class="error-message" *ngIf="hasError('name')">
          {{ getErrorMessage('name') }}
        </span>
      </div>

      <div class="form-group">
        <label for="email" class="form-label">
          Email Address <span class="required">*</span>
        </label>
        <input
          type="email"
          id="email"
          formControlName="email"
          class="form-input"
          [class.error]="hasError('email')"
          placeholder="john.doe@example.com"
          autocomplete="email"
        />
        <span class="error-message" *ngIf="hasError('email')">
          {{ getErrorMessage('email') }}
        </span>
      </div>

      <div class="form-group">
        <label for="city" class="form-label">
          City <span class="required">*</span>
        </label>
        <input
          type="text"
          id="city"
          formControlName="city"
          class="form-input"
          [class.error]="hasError('city')"
          placeholder="New York"
          autocomplete="address-level2"
        />
        <span class="error-message" *ngIf="hasError('city')">
          {{ getErrorMessage('city') }}
        </span>
      </div>

      <div class="form-actions">
        <button
          type="button"
          class="cancel-button"
          (click)="onClose()"
          [disabled]="isSubmitting"
        >
          Cancel
        </button>
        <button
          type="submit"
          class="submit-button"
          [disabled]="isSubmitting"
        >
          <span *ngIf="!isSubmitting">Create User</span>
          <span *ngIf="isSubmitting" class="loading-text">
            <svg class="spinner" viewBox="0 0 24 24">
              <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" fill="none" />
              <path class="opacity-75" fill="currentColor"
                    d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z" />
            </svg>
            Creating...
          </span>
        </button>
      </div>
    </form>
  </div>
</div>
